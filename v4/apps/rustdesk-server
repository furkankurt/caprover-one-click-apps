{"captainVersion":4,"services":{"hbbr":{"image":"rustdesk/rustdesk-server:$$cap_version","command":"hbbr","volumes":["$$cap_appname-data:/root"],"ports":["21117:21117","21119:21119"],"caproverExtra":{"notExposeAsWebApp":"true"}},"hbbs":{"image":"rustdesk/rustdesk-server:$$cap_version","command":"hbbs","environment":["ALWAYS_USE_RELAY=$$cap_always_use_relay"],"volumes":["$$cap_appname-data:/root"],"ports":["21115:21115","21116:21116","21116:21116/udp","21118:21118","21114:21114"],"depends_on":["hbbr"],"caproverExtra":{"notExposeAsWebApp":"true"}}},"caproverOneClickApp":{"variables":[{"id":"$$cap_version","label":"RustDesk Server Image Tag","defaultValue":"latest","description":"Docker tag for rustdesk/rustdesk-server (e.g., latest)","validRegex":"/.{1,}/"},{"id":"$$cap_always_use_relay","label":"ALWAYS_USE_RELAY","defaultValue":"N","description":"Y or N ‚Äî set to Y to force relay for strict NAT environments","validRegex":"/^(Y|N|y|n)$/"}],"instructions":{"start":"This One-Click App deploys a **RustDesk self-hosted server** with two containers:\n- `hbbs` (broker)\n- `hbbr` (relay)\n\nSince RustDesk Server is **not an HTTP app**, it doesn‚Äôt use CapRover ingress.\nThe containers listen directly on these ports:\n\n  hbbs:\n    - 21115/TCP ‚Äî NAT type test\n    - 21116/UDP ‚Äî ID registration & heartbeat\n    - 21116/TCP ‚Äî TCP hole punching & connection\n    - 21118/TCP ‚Äî (optional) Web client support\n    - 21114/TCP ‚Äî (optional) Pro web console\n  hbbr:\n    - 21117/TCP ‚Äî Relay\n    - 21119/TCP ‚Äî (optional) Web client support\n\nüîê **Open firewall ports (copy/paste all):**\n```bash\nsudo ufw allow 21115/tcp\nsudo ufw allow 21116/tcp\nsudo ufw allow 21116/udp\nsudo ufw allow 21117/tcp\n# Optional (enable only if you need them)\nsudo ufw allow 21118/tcp\nsudo ufw allow 21119/tcp\nsudo ufw allow 21114/tcp\n```\n\nüíæ Data is stored persistently in CapRover volume `$$cap_appname-data` mounted at `/root`.\n\nüß™ For strict NAT/CGNAT, set `ALWAYS_USE_RELAY=Y`.","end":"‚úÖ **RustDesk Server deployment completed successfully!**\n\nThe **ID key** is automatically generated on the first run of `hbbs`.  \nYou can find it here inside your container or data volume:\n\n```\n/captain/data/config-caprover-volumes/$$cap_appname-data/id_ed25519.pub\n```\n\nCopy the contents of this key ‚Äî it will be required by your RustDesk clients.\n\n**Credentials to use in RustDesk client ‚Üí Settings ‚Üí Network:**\n\n```\nID Server: $$cap_appname.$$cap_root_domain\nRelay Server: $$cap_appname.$$cap_root_domain\nAPI Server: https://$$cap_appname.$$cap_root_domain\nKey: contents of id_ed25519.pub (see path above)\n```\n\nüîê If you don‚Äôt use the web client or Pro console, you may close ports 21118, 21119, and 21114."},"displayName":"RustDesk Server (hbbs + hbbr)","isOfficial":false,"description":"Self-host your own RustDesk server. RustDesk is a full-featured open source remote control alternative for self-hosting and security with minimal configuration.\n","documentation":"https://github.com/rustdesk/rustdesk-server"}}
